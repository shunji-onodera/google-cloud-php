{"id":"spanner\/database","type":"","title":"Google\\Cloud\\Spanner\\Database","name":"Database","description":"<p>Represents a Cloud Spanner Database.<\/p>","examples":[{"caption":"","code":"use Google\\Cloud\\Spanner\\SpannerClient;\n\n$spanner = new SpannerClient();\n\n$database = $spanner->connect('my-instance', 'my-database');"},{"caption":"<p>Databases can also be connected to via an Instance.<\/p>","code":"use Google\\Cloud\\Spanner\\SpannerClient;\n\n$spanner = new SpannerClient();\n\n$instance = $spanner->instance('my-instance');\n$database = $instance->database('my-database');"}],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"Spanner\/src\/Database.php#L188","description":"<p>Create an object representing a Database.<\/p>","examples":[],"resources":[],"params":[{"name":"connection","description":"<p>The connection to the\nCloud Spanner Admin API.<\/p>","types":["<a data-custom-type=\"spanner\/connection\/connectioninterface\">Google\\Cloud\\Spanner\\Connection\\ConnectionInterface<\/a>"],"optional":false,"nullable":null},{"name":"instance","description":"<p>The instance in which the database exists.<\/p>","types":["<a data-custom-type=\"spanner\/instance\">Google\\Cloud\\Spanner\\Instance<\/a>"],"optional":false,"nullable":null},{"name":"lroConnection","description":"<p>An implementation\nmapping to methods which handle LRO resolution in the service.<\/p>","types":["<a data-custom-type=\"core\/longrunning\/longrunningconnectioninterface\">Google\\Cloud\\Core\\LongRunning\\LongRunningConnectionInterface<\/a>"],"optional":false,"nullable":null},{"name":"lroCallables","description":"","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"projectId","description":"<p>The project ID.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"name","description":"<p>The database name or ID.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"sessionPool","description":"<p>The session pool\nimplementation.<\/p>","types":["<a data-custom-type=\"spanner\/session\/sessionpoolinterface\">Google\\Cloud\\Spanner\\Session\\SessionPoolInterface<\/a>"],"optional":true,"nullable":null},{"name":"returnInt64AsObject","description":"<p>[optional If true, 64 bit integers will\nbe returned as a <a data-custom-type=\"core\/int64\">Google\\Cloud\\Core\\Int64<\/a> object for 32 bit\nplatform compatibility. <strong>Defaults to<\/strong> false.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[]},{"id":"state","type":"instance","name":"state","source":"Spanner\/src\/Database.php#L233","description":"<p>Return the database state.<\/p>\n<p>When databases are created or restored, they may take some time before\nthey are ready for use. This method allows for checking whether a\ndatabase is ready. Note that this value is cached within the class instance,\nso if you are polling it, first call <a data-custom-type=\"spanner\/database\" data-method=\"reload\">Google\\Cloud\\Spanner\\Database::reload()<\/a>\nto refresh the cached value.<\/p>","examples":[{"caption":"","code":"if ($database->state() === Database::STATE_READY) {\n    echo 'Database is ready!';\n}"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.null.php\" target=\"_blank\">null<\/a>"],"description":""}]},{"id":"backups","type":"instance","name":"backups","source":"Spanner\/src\/Database.php#L265","description":"<p>List completed and pending backups belonging to this database.<\/p>","examples":[{"caption":"","code":"$backups = $database->backups();"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.filter","description":"<p>The standard list filter. <strong>NOTE<\/strong>: This method always sets the database filter as a name of this database. User may provide additional filter expressions which would be appended in the form of &quot;(database:<databaseName>) AND (<additional filter expression from user>)&quot;<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.pageSize","description":"<p>Maximum number of results to return per request.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.resultLimit","description":"<p>Limit the number of results returned in total. <strong>Defaults to<\/strong> <code>0<\/code> (return all results).<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.pageToken","description":"<p>A previously-returned page token used to resume the loading of results from a specific point.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"core\/iterator\/itemiterator\">Google\\Cloud\\Core\\Iterator\\ItemIterator<\/a>&lt;<a data-custom-type=\"spanner\/backup\">Google\\Cloud\\Spanner\\Backup<\/a>&gt;"],"description":""}]},{"id":"createBackup","type":"instance","name":"createBackup","source":"Spanner\/src\/Database.php#L295","description":"<p>Create a backup for this database.<\/p>","examples":[{"caption":"","code":"$operation = $database->createBackup('my-backup', new \\DateTime('+7 hours'));"}],"resources":[],"params":[{"name":"name","description":"<p>The backup name.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"expireTime","description":"<p>\u200bThe expiration time of the backup,\nwith microseconds granularity that must be at least 6 hours and\nat most 366 days. Once the expireTime has passed, the backup is\neligible to be automatically deleted by Cloud Spanner.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/class.datetimeinterface.php\" target=\"_blank\">DateTimeInterface<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"core\/longrunning\/longrunningoperation\">Google\\Cloud\\Core\\LongRunning\\LongRunningOperation<\/a>&lt;<a data-custom-type=\"spanner\/backup\">Google\\Cloud\\Spanner\\Backup<\/a>&gt;"],"description":""}]},{"id":"name","type":"instance","name":"name","source":"Spanner\/src\/Database.php#L311","description":"<p>Return the fully-qualified database name.<\/p>","examples":[{"caption":"","code":"$name = $database->name();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"description":""}]},{"id":"info","type":"instance","name":"info","source":"Spanner\/src\/Database.php#L331","description":"<p>Get the database info<\/p>","examples":[{"caption":"","code":"$info = $database->info();"}],"resources":[{"title":"Database","link":"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rpc\/google.spanner.admin.database.v1#google.spanner.admin.database.v1.Database"}],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":""}]},{"id":"reload","type":"instance","name":"reload","source":"Spanner\/src\/Database.php#L351","description":"<p>Reload the database info from the Cloud Spanner API.<\/p>","examples":[{"caption":"","code":"$info = $database->reload();"}],"resources":[{"title":"Database","link":"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rpc\/google.spanner.admin.database.v1#google.spanner.admin.database.v1.Database"}],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":""}]},{"id":"exists","type":"instance","name":"exists","source":"Spanner\/src\/Database.php#L375","description":"<p>Check if the database exists.<\/p>\n<p>This method sends a service request.<\/p>\n<p><strong>NOTE<\/strong>: Requires <code>https:\/\/www.googleapis.com\/auth\/spanner.admin<\/code> scope.<\/p>","examples":[{"caption":"","code":"if ($database->exists()) {\n    echo 'Database exists!';\n}"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"description":""}]},{"id":"create","type":"instance","name":"create","source":"Spanner\/src\/Database.php#L405","description":"<p>Create a new Cloud Spanner database.<\/p>","examples":[{"caption":"","code":"$operation = $database->create();"}],"resources":[{"title":"CreateDatabaseRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.admin.database.v1#createdatabaserequest"}],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.statements","description":"<p>Additional DDL statements.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string[]<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"core\/longrunning\/longrunningoperation\">Google\\Cloud\\Core\\LongRunning\\LongRunningOperation<\/a>&lt;<a data-custom-type=\"spanner\/database\">Google\\Cloud\\Spanner\\Database<\/a>&gt;"],"description":""}]},{"id":"restore","type":"instance","name":"restore","source":"Spanner\/src\/Database.php#L437","description":"<p>Restores to this database from a backup.<\/p>\n<p><strong>NOTE<\/strong>: A restore operation can only be made to a non-existing database.<\/p>","examples":[{"caption":"","code":"$operation = $database->restore($backup);"}],"resources":[],"params":[{"name":"backup","description":"<p>The backup to restore, given as a Backup instance or a string of the form\n<code>projects\/&lt;project&gt;\/instances\/&lt;instance&gt;\/backups\/&lt;backup&gt;<\/code>.<\/p>","types":["<a data-custom-type=\"spanner\/backup\">Google\\Cloud\\Spanner\\Backup<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"core\/longrunning\/longrunningoperation\">Google\\Cloud\\Core\\LongRunning\\LongRunningOperation<\/a>&lt;<a data-custom-type=\"spanner\/database\">Google\\Cloud\\Spanner\\Database<\/a>&gt;"],"description":""}]},{"id":"updateDdl","type":"instance","name":"updateDdl","source":"Spanner\/src\/Database.php#L467","description":"<p>Update the Database schema by running a SQL statement.<\/p>\n<p><strong>NOTE<\/strong>: Requires <code>https:\/\/www.googleapis.com\/auth\/spanner.admin<\/code> scope.<\/p>","examples":[{"caption":"","code":"$database->updateDdl(\n    'CREATE TABLE Users (\n        id INT64 NOT NULL,\n        name STRING(100) NOT NULL\n        password STRING(100) NOT NULL\n    )'\n);"}],"resources":[{"title":"Data Definition Language","link":"https:\/\/cloud.google.com\/spanner\/docs\/data-definition-language"},{"title":"UpdateDDLRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.admin.database.v1#google.spanner.admin.database.v1.UpdateDatabaseDdlRequest"}],"params":[{"name":"statement","description":"<p>A DDL statements to run against a database.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"core\/longrunning\/longrunningoperation\">Google\\Cloud\\Core\\LongRunning\\LongRunningOperation<\/a>"],"description":""}]},{"id":"updateDdlBatch","type":"instance","name":"updateDdlBatch","source":"Spanner\/src\/Database.php#L502","description":"<p>Update the Database schema by running a set of SQL statements.<\/p>\n<p><strong>NOTE<\/strong>: Requires <code>https:\/\/www.googleapis.com\/auth\/spanner.admin<\/code> scope.<\/p>","examples":[{"caption":"","code":"$database->updateDdlBatch([\n    'CREATE TABLE Users (\n        id INT64 NOT NULL,\n        name STRING(100) NOT NULL,\n        password STRING(100) NOT NULL\n    ) PRIMARY KEY (id)',\n    'CREATE TABLE Posts (\n        id INT64 NOT NULL,\n        title STRING(100) NOT NULL,\n        content STRING(MAX) NOT NULL\n    ) PRIMARY KEY(id)'\n]);"}],"resources":[{"title":"Data Definition Language","link":"https:\/\/cloud.google.com\/spanner\/docs\/data-definition-language"},{"title":"UpdateDDLRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.admin.database.v1#google.spanner.admin.database.v1.UpdateDatabaseDdlRequest"}],"params":[{"name":"statements","description":"<p>A list of DDL statements to run against a database.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string[]<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"core\/longrunning\/longrunningoperation\">Google\\Cloud\\Core\\LongRunning\\LongRunningOperation<\/a>"],"description":""}]},{"id":"drop","type":"instance","name":"drop","source":"Spanner\/src\/Database.php#L534","description":"<p>Drop the database.<\/p>\n<p>Please note that after a database is dropped, all sessions attached to it\nwill be invalid and unusable. Calls to this method will clear any session\npool attached to this database class instance and delete any sessions\nattached to the database class instance.<\/p>\n<p><strong>NOTE<\/strong>: Requires <code>https:\/\/www.googleapis.com\/auth\/spanner.admin<\/code> scope.<\/p>","examples":[{"caption":"","code":"$database->drop();"}],"resources":[{"title":"DropDatabaseRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.admin.database.v1#google.spanner.admin.database.v1.DropDatabaseRequest"}],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]},{"id":"ddl","type":"instance","name":"ddl","source":"Spanner\/src\/Database.php#L567","description":"<p>Get a list of all database DDL statements.<\/p>\n<p><strong>NOTE<\/strong>: Requires <code>https:\/\/www.googleapis.com\/auth\/spanner.admin<\/code> scope.<\/p>","examples":[{"caption":"","code":"$statements = $database->ddl();"}],"resources":[{"title":"GetDatabaseDdlRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.admin.database.v1#getdatabaseddlrequest"}],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":""}]},{"id":"iam","type":"instance","name":"iam","source":"Spanner\/src\/Database.php#L590","description":"<p>Manage the database IAM policy<\/p>","examples":[{"caption":"","code":"$iam = $database->iam();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"core\/iam\/iam\">Google\\Cloud\\Core\\Iam\\Iam<\/a>"],"description":""}]},{"id":"snapshot","type":"instance","name":"snapshot","source":"Spanner\/src\/Database.php#L665","description":"<p>Create a snapshot to read from a database at a point in time.<\/p>\n<p>If no configuration options are provided, transaction will be opened with\nstrong consistency.<\/p>\n<p>Snapshots are executed behind the scenes using a Read-Only Transaction.<\/p>","examples":[{"caption":"","code":"$snapshot = $database->snapshot();"},{"caption":"<p>Take a shapshot with a returned timestamp.<\/p>","code":"$snapshot = $database->snapshot([\n    'returnReadTimestamp' => true\n]);\n\n$timestamp = $snapshot->readTimestamp();"}],"resources":[{"title":"BeginTransactionRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.BeginTransactionRequest"},{"title":"Transactions","link":"https:\/\/cloud.google.com\/spanner\/docs\/transactions"}],"params":[{"name":"options","description":"<p>Configuration Options<\/p>\n<pre><code>See [ReadOnly](https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.TransactionOptions.ReadOnly)\nfor detailed description of available options.\n\nPlease note that only one of `$strong`, `$readTimestamp` or\n`$exactStaleness` may be set in a request.<\/code><\/pre>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.returnReadTimestamp","description":"<p>If true, the Cloud Spanner-selected read timestamp is included in the Transaction message that describes the transaction.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.strong","description":"<p>Read at a timestamp where all previously committed transactions are visible.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.readTimestamp","description":"<p>Executes all reads at the given timestamp.<\/p>","types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"optional":null,"nullable":null},{"name":"options.exactStaleness","description":"<p>Represents a number of seconds. Executes all reads at a timestamp that is $exactStaleness old.<\/p>","types":["<a data-custom-type=\"spanner\/duration\">Google\\Cloud\\Spanner\\Duration<\/a>"],"optional":null,"nullable":null},{"name":"options.minReadTimestamp","description":"<p>Executes all reads at a timestamp &gt;= min_read_timestamp. Only available when <code>$options.singleUse<\/code> is true.<\/p>","types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"optional":null,"nullable":null},{"name":"options.maxStaleness","description":"<p>Read data at a timestamp &gt;= NOW - max_staleness seconds. Guarantees that all writes that have committed more than the specified number of seconds ago are visible. Only available when <code>$options.singleUse<\/code> is true.<\/p>","types":["<a data-custom-type=\"spanner\/duration\">Google\\Cloud\\Spanner\\Duration<\/a>"],"optional":null,"nullable":null},{"name":"options.singleUse","description":"<p>If true, a Transaction ID will not be allocated up front. Instead, the transaction will be considered &quot;single-use&quot;, and may be used for only a single operation. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.sessionOptions","description":"<p>Session configuration and request options. Session labels may be applied using the <code>labels<\/code> key.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\BadMethodCallException","description":"If attempting to call this method within\nan existing transaction."}],"returns":[{"types":["<a data-custom-type=\"spanner\/snapshot\">Google\\Cloud\\Spanner\\Snapshot<\/a>"],"description":""}]},{"id":"transaction","type":"instance","name":"transaction","source":"Spanner\/src\/Database.php#L730","description":"<p>Create and return a new read\/write Transaction.<\/p>\n<p>When manually using a Transaction, it is advised that retry logic be\nimplemented to reapply all operations when an instance of\n<a data-custom-type=\"core\/exception\/abortedexception\">Google\\Cloud\\Core\\Exception\\AbortedException<\/a> is thrown.<\/p>\n<p>If you wish Google Cloud PHP to handle retry logic for you (recommended\nfor most cases), use <a data-custom-type=\"spanner\/database\" data-method=\"runTransaction\">Google\\Cloud\\Spanner\\Database::runTransaction()<\/a>.<\/p>\n<p>Please note that once a transaction reads data, it will lock the read\ndata, preventing other users from modifying that data. For this reason,\nit is important that every transaction commits or rolls back as early as\npossible. Do not hold transactions open longer than necessary.<\/p>","examples":[{"caption":"","code":"$transaction = $database->transaction();"}],"resources":[{"title":"BeginTransactionRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.BeginTransactionRequest"},{"title":"Transactions","link":"https:\/\/cloud.google.com\/spanner\/docs\/transactions"}],"params":[{"name":"options","description":"<p>Configuration Options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.singleUse","description":"<p>If true, a Transaction ID will not be allocated up front. Instead, the transaction will be considered &quot;single-use&quot;, and may be used for only a single operation. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.sessionOptions","description":"<p>Session configuration and request options. Session labels may be applied using the <code>labels<\/code> key.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.tag","description":"<p>A transaction tag. Requests made using this transaction will use this as the transaction tag.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\BadMethodCallException","description":"If attempting to call this method within\nan existing transaction."}],"returns":[{"types":["<a data-custom-type=\"spanner\/transaction\">Google\\Cloud\\Spanner\\Transaction<\/a>"],"description":""}]},{"id":"runTransaction","type":"instance","name":"runTransaction","source":"Spanner\/src\/Database.php#L834","description":"<p>Execute Read\/Write operations inside a Transaction.<\/p>\n<p>Using this method and providing a callable operation provides certain\nbenefits including automatic retry when a transaction fails. In case of a\nfailure, all transaction operations, including reads, are re-applied in a\nnew transaction.<\/p>\n<p>If a transaction exceeds the maximum number of retries,\n<a data-custom-type=\"core\/exception\/abortedexception\">Google\\Cloud\\Core\\Exception\\AbortedException<\/a> will be thrown. Any other\nexception types will immediately bubble up and will interrupt the retry\noperation.<\/p>\n<p>Please note that once a transaction reads data, it will lock the read\ndata, preventing other users from modifying that data. For this reason,\nit is important that every transaction commits or rolls back as early as\npossible. Do not hold transactions open longer than necessary.<\/p>\n<p>Please also note that nested transactions are NOT supported by this client.\nAttempting to call <code>runTransaction<\/code> inside a transaction callable will\nraise a <code>BadMethodCallException<\/code>.<\/p>\n<p>If a callable finishes executing without invoking\n<a data-custom-type=\"spanner\/transaction\" data-method=\"commit\">Google\\Cloud\\Spanner\\Transaction::commit()<\/a> or\n<a data-custom-type=\"spanner\/transaction\" data-method=\"rollback\">Google\\Cloud\\Spanner\\Transaction::rollback()<\/a>, the transaction will\nautomatically be rolled back and <code>\\RuntimeException<\/code> thrown.<\/p>","examples":[{"caption":"","code":"use Google\\Cloud\\Spanner\\Timestamp;\n\n$transaction = $database->runTransaction(function (Transaction $t) use ($username, $password) {\n    $rows = $t->execute('SELECT * FROM Users WHERE Name = @name and PasswordHash = @password', [\n        'parameters' => [\n            'name' => $username,\n            'password' => password_hash($password, PASSWORD_DEFAULT)\n        ]\n    ])->rows();\n    $user = $rows->current();\n\n    if ($user) {\n        \/\/ Do something here to grant the user access.\n        \/\/ Maybe set a cookie?\n\n        $user['lastLoginTime'] = new Timestamp(new \\DateTime);\n        $user['loginCount'] = $user['loginCount'] + 1;\n        $t->update('Users', $user);\n\n        $t->commit();\n    } else {\n        $t->rollback();\n    }\n});"}],"resources":[{"title":"BeginTransactionRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.BeginTransactionRequest"},{"title":"Transactions","link":"https:\/\/cloud.google.com\/spanner\/docs\/transactions"}],"params":[{"name":"operation","description":"<p>The operations to run in the transaction.\n<strong>Signature:<\/strong> <code>function (Transaction $transaction)<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.callable.php\" target=\"_blank\">callable<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.maxRetries","description":"<p>The number of times to attempt to apply the operation before failing. <strong>Defaults to <\/strong> <code>10<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.singleUse","description":"<p>If true, a Transaction ID will not be allocated up front. Instead, the transaction will be considered &quot;single-use&quot;, and may be used for only a single operation. Note that in a single-use transaction, only a single operation may be executed, and rollback is not available. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.sessionOptions","description":"<p>Session configuration and request options. Session labels may be applied using the <code>labels<\/code> key.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.tag","description":"<p>A transaction tag. Requests made using this transaction will use this as the transaction tag.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\RuntimeException","description":"If a transaction is not committed or rolled back."},{"type":"\\BadMethodCallException","description":"If attempting to call this method within\nan existing transaction."}],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.mixed\" target=\"_blank\">mixed<\/a>"],"description":"<p>The return value of <code>$operation<\/code>.<\/p>"}]},{"id":"insert","type":"instance","name":"insert","source":"Spanner\/src\/Database.php#L943","description":"<p>Insert a row.<\/p>\n<p>Mutations are committed in a single-use transaction.<\/p>\n<p>Since this method does not feature replay protection, it may attempt to\napply mutations more than once; if the mutations are not idempotent, this\nmay lead to a failure being reported when the mutation was previously\napplied.<\/p>","examples":[{"caption":"","code":"$database->insert('Posts', [\n    'ID' => 1337,\n    'postTitle' => 'Hello World!',\n    'postContent' => 'Welcome to our site.'\n]);"}],"resources":[{"title":"CommitRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.CommitRequest"}],"params":[{"name":"table","description":"<p>The table to mutate.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"data","description":"<p>The row data to insert.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.requestOptions","description":"<p>Request options. For more information on available options, please see <a href=\"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rest\/v1\/RequestOptions\">the upstream documentation<\/a>. Please note, if using the <code>priority<\/code> setting you may utilize the constants available on <a data-custom-type=\"spanner\/v1\/requestoptions\/priority\">Google\\Cloud\\Spanner\\V1\\RequestOptions\\Priority<\/a> to set a value. Please note, the <code>transactionTag<\/code> setting will be ignored as it is not supported for single-use transactions.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"description":"<p>The commit Timestamp.<\/p>"}]},{"id":"insertBatch","type":"instance","name":"insertBatch","source":"Spanner\/src\/Database.php#L992","description":"<p>Insert multiple rows.<\/p>\n<p>Mutations are committed in a single-use transaction.<\/p>\n<p>Since this method does not feature replay protection, it may attempt to\napply mutations more than once; if the mutations are not idempotent, this\nmay lead to a failure being reported when the mutation was previously\napplied.<\/p>","examples":[{"caption":"","code":"$database->insertBatch('Posts', [\n    [\n        'ID' => 1337,\n        'postTitle' => 'Hello World!',\n        'postContent' => 'Welcome to our site.'\n    ], [\n        'ID' => 1338,\n        'postTitle' => 'Our History',\n        'postContent' => 'Lots of people ask about where we got started.'\n    ]\n]);"}],"resources":[{"title":"CommitRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.CommitRequest"}],"params":[{"name":"table","description":"<p>The table to mutate.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"dataSet","description":"<p>The row data to insert.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.requestOptions","description":"<p>Request options. For more information on available options, please see <a href=\"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rest\/v1\/RequestOptions\">the upstream documentation<\/a>. Please note, if using the <code>priority<\/code> setting you may utilize the constants available on <a data-custom-type=\"spanner\/v1\/requestoptions\/priority\">Google\\Cloud\\Spanner\\V1\\RequestOptions\\Priority<\/a> to set a value. Please note, the <code>transactionTag<\/code> setting will be ignored as it is not supported for single-use transactions.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"description":"<p>The commit Timestamp.<\/p>"}]},{"id":"update","type":"instance","name":"update","source":"Spanner\/src\/Database.php#L1038","description":"<p>Update a row.<\/p>\n<p>Only data which you wish to update need be included. The list of columns\nmust contain enough columns to allow Cloud Spanner to derive values for\nall primary key columns in the row to be modified.<\/p>\n<p>Mutations are committed in a single-use transaction.<\/p>","examples":[{"caption":"","code":"$database->update('Posts', [\n    'ID' => 1337,\n    'postContent' => 'Thanks for visiting our site!'\n]);"}],"resources":[{"title":"CommitRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.CommitRequest"}],"params":[{"name":"table","description":"<p>The table to mutate.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"data","description":"<p>The row data to update.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.requestOptions","description":"<p>Request options. For more information on available options, please see <a href=\"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rest\/v1\/RequestOptions\">the upstream documentation<\/a>. Please note, if using the <code>priority<\/code> setting you may utilize the constants available on <a data-custom-type=\"spanner\/v1\/requestoptions\/priority\">Google\\Cloud\\Spanner\\V1\\RequestOptions\\Priority<\/a> to set a value. Please note, the <code>transactionTag<\/code> setting will be ignored as it is not supported for single-use transactions.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"description":"<p>The commit Timestamp.<\/p>"}]},{"id":"updateBatch","type":"instance","name":"updateBatch","source":"Spanner\/src\/Database.php#L1084","description":"<p>Update multiple rows.<\/p>\n<p>Only data which you wish to update need be included. The list of columns\nmust contain enough columns to allow Cloud Spanner to derive values for\nall primary key columns in the row(s) to be modified.<\/p>\n<p>Mutations are committed in a single-use transaction.<\/p>","examples":[{"caption":"","code":"$database->updateBatch('Posts', [\n    [\n        'ID' => 1337,\n        'postContent' => 'Thanks for visiting our site!'\n    ], [\n        'ID' => 1338,\n        'postContent' => 'A little bit about us!'\n    ]\n]);"}],"resources":[{"title":"CommitRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.CommitRequest"}],"params":[{"name":"table","description":"<p>The table to mutate.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"dataSet","description":"<p>The row data to update.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.requestOptions","description":"<p>Request options. For more information on available options, please see <a href=\"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rest\/v1\/RequestOptions\">the upstream documentation<\/a>. Please note, if using the <code>priority<\/code> setting you may utilize the constants available on <a data-custom-type=\"spanner\/v1\/requestoptions\/priority\">Google\\Cloud\\Spanner\\V1\\RequestOptions\\Priority<\/a> to set a value. Please note, the <code>transactionTag<\/code> setting will be ignored as it is not supported for single-use transactions.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"description":"<p>The commit Timestamp.<\/p>"}]},{"id":"insertOrUpdate","type":"instance","name":"insertOrUpdate","source":"Spanner\/src\/Database.php#L1131","description":"<p>Insert or update a row.<\/p>\n<p>If a row already exists (determined by comparing the Primary Key to\nexisting table data), the row will be updated. If not, it will be\ncreated.<\/p>\n<p>Mutations are committed in a single-use transaction.<\/p>","examples":[{"caption":"","code":"$database->insertOrUpdate('Posts', [\n    'ID' => 1337,\n    'postTitle' => 'Hello World!',\n    'postContent' => 'Thanks for visiting our site!'\n]);"}],"resources":[{"title":"CommitRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.CommitRequest"}],"params":[{"name":"table","description":"<p>The table to mutate.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"data","description":"<p>The row data to insert or update.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.requestOptions","description":"<p>Request options. For more information on available options, please see <a href=\"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rest\/v1\/RequestOptions\">the upstream documentation<\/a>. Please note, if using the <code>priority<\/code> setting you may utilize the constants available on <a data-custom-type=\"spanner\/v1\/requestoptions\/priority\">Google\\Cloud\\Spanner\\V1\\RequestOptions\\Priority<\/a> to set a value. Please note, the <code>transactionTag<\/code> setting will be ignored as it is not supported for single-use transactions.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"description":"<p>The commit Timestamp.<\/p>"}]},{"id":"insertOrUpdateBatch","type":"instance","name":"insertOrUpdateBatch","source":"Spanner\/src\/Database.php#L1179","description":"<p>Insert or update multiple rows.<\/p>\n<p>If a row already exists (determined by comparing the Primary Key to\nexisting table data), the row will be updated. If not, it will be\ncreated.<\/p>\n<p>Mutations are committed in a single-use transaction.<\/p>","examples":[{"caption":"","code":"$database->insertOrUpdateBatch('Posts', [\n    [\n        'ID' => 1337,\n        'postTitle' => 'Hello World!',\n        'postContent' => 'Thanks for visiting our site!'\n    ], [\n        'ID' => 1338,\n        'postTitle' => 'Our History',\n        'postContent' => 'A little bit about us!'\n    ]\n]);"}],"resources":[{"title":"CommitRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.CommitRequest"}],"params":[{"name":"table","description":"<p>The table to mutate.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"dataSet","description":"<p>The row data to insert or update.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.requestOptions","description":"<p>Request options. For more information on available options, please see <a href=\"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rest\/v1\/RequestOptions\">the upstream documentation<\/a>. Please note, if using the <code>priority<\/code> setting you may utilize the constants available on <a data-custom-type=\"spanner\/v1\/requestoptions\/priority\">Google\\Cloud\\Spanner\\V1\\RequestOptions\\Priority<\/a> to set a value. Please note, the <code>transactionTag<\/code> setting will be ignored as it is not supported for single-use transactions.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"description":"<p>The commit Timestamp.<\/p>"}]},{"id":"replace","type":"instance","name":"replace","source":"Spanner\/src\/Database.php#L1226","description":"<p>Replace a row.<\/p>\n<p>Provide data for the entire row. Cloud Spanner will attempt to find a\nrecord matching the Primary Key, and will replace the entire row. If a\nmatching row is not found, it will be inserted.<\/p>\n<p>Mutations are committed in a single-use transaction.<\/p>","examples":[{"caption":"","code":"$database->replace('Posts', [\n    'ID' => 1337,\n    'postTitle' => 'Hello World!',\n    'postContent' => 'Thanks for visiting our site!'\n]);"}],"resources":[{"title":"CommitRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.CommitRequest"}],"params":[{"name":"table","description":"<p>The table to mutate.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"data","description":"<p>The row data to replace.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.requestOptions","description":"<p>Request options. For more information on available options, please see <a href=\"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rest\/v1\/RequestOptions\">the upstream documentation<\/a>. Please note, if using the <code>priority<\/code> setting you may utilize the constants available on <a data-custom-type=\"spanner\/v1\/requestoptions\/priority\">Google\\Cloud\\Spanner\\V1\\RequestOptions\\Priority<\/a> to set a value. Please note, the <code>transactionTag<\/code> setting will be ignored as it is not supported for single-use transactions.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"description":"<p>The commit Timestamp.<\/p>"}]},{"id":"replaceBatch","type":"instance","name":"replaceBatch","source":"Spanner\/src\/Database.php#L1274","description":"<p>Replace multiple rows.<\/p>\n<p>Provide data for the entire row. Cloud Spanner will attempt to find a\nrecord matching the Primary Key, and will replace the entire row. If a\nmatching row is not found, it will be inserted.<\/p>\n<p>Mutations are committed in a single-use transaction.<\/p>","examples":[{"caption":"","code":"$database->replaceBatch('Posts', [\n    [\n        'ID' => 1337,\n        'postTitle' => 'Hello World!',\n        'postContent' => 'Thanks for visiting our site!'\n    ], [\n        'ID' => 1338,\n        'postTitle' => 'Our History',\n        'postContent' => 'A little bit about us!'\n    ]\n]);"}],"resources":[{"title":"CommitRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.CommitRequest"}],"params":[{"name":"table","description":"<p>The table to mutate.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"dataSet","description":"<p>The row data to replace.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.requestOptions","description":"<p>Request options. For more information on available options, please see <a href=\"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rest\/v1\/RequestOptions\">the upstream documentation<\/a>. Please note, if using the <code>priority<\/code> setting you may utilize the constants available on <a data-custom-type=\"spanner\/v1\/requestoptions\/priority\">Google\\Cloud\\Spanner\\V1\\RequestOptions\\Priority<\/a> to set a value. Please note, the <code>transactionTag<\/code> setting will be ignored as it is not supported for single-use transactions.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"description":"<p>The commit Timestamp.<\/p>"}]},{"id":"delete","type":"instance","name":"delete","source":"Spanner\/src\/Database.php#L1324","description":"<p>Delete one or more rows.<\/p>\n<p>Mutations are committed in a single-use transaction.<\/p>\n<p>Since this method does not feature replay protection, it may attempt to\napply mutations more than once; if the mutations are not idempotent, this\nmay lead to a failure being reported when the mutation was previously\napplied.<\/p>","examples":[{"caption":"","code":"$keySet = new KeySet([\n    'keys' => [\n        1337, 1338\n    ]\n]);\n\n$database->delete('Posts', $keySet);"}],"resources":[{"title":"CommitRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.CommitRequest"}],"params":[{"name":"table","description":"<p>The table to mutate.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"keySet","description":"<p>The KeySet to identify rows to delete.<\/p>","types":["<a data-custom-type=\"spanner\/keyset\">Google\\Cloud\\Spanner\\KeySet<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.requestOptions","description":"<p>Request options. For more information on available options, please see <a href=\"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rest\/v1\/RequestOptions\">the upstream documentation<\/a>. Please note, if using the <code>priority<\/code> setting you may utilize the constants available on <a data-custom-type=\"spanner\/v1\/requestoptions\/priority\">Google\\Cloud\\Spanner\\V1\\RequestOptions\\Priority<\/a> to set a value. Please note, the <code>transactionTag<\/code> setting will be ignored as it is not supported for single-use transactions.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"description":"<p>The commit Timestamp.<\/p>"}]},{"id":"execute","type":"instance","name":"execute","source":"Spanner\/src\/Database.php#L1580","description":"<p>Run a query.<\/p>\n<p>Google Cloud PHP will infer parameter types for all primitive types and\nall values implementing <a data-custom-type=\"spanner\/valueinterface\">Google\\Cloud\\Spanner\\ValueInterface<\/a>, with\nthe exception of <code>null<\/code>. Non-associative arrays will be interpreted as\na Spanner ARRAY type, and must contain only a single type of value.\nAssociative arrays or values of type <a data-custom-type=\"spanner\/structvalue\">Google\\Cloud\\Spanner\\StructValue<\/a>\nwill be interpreted as Spanner STRUCT type. Structs MUST always explicitly\ndefine their field types.<\/p>\n<p>In any case where the value of a parameter may be <code>null<\/code>, you MUST\nexplicitly define the parameter's type.<\/p>\n<p>With the exception of arrays and structs, types are defined using a type\nconstant defined on <a data-custom-type=\"spanner\/database\">Google\\Cloud\\Spanner\\Database<\/a>. Examples include\nbut are not limited to <code>Database::TYPE_STRING<\/code> and <code>Database::TYPE_INT64<\/code>.<\/p>\n<p>Arrays, when explicitly typing, should use an instance of\n<a data-custom-type=\"spanner\/arraytype\">Google\\Cloud\\Spanner\\ArrayType<\/a> to declare their type and the types\nof any values contained within the array elements.<\/p>\n<p>Structs must always declare their type using an instance of\n<a data-custom-type=\"spanner\/structtype\">Google\\Cloud\\Spanner\\StructType<\/a>. Struct values may be expressed as\nan associative array, however if the struct contains any unnamed fields,\nor any fields with duplicate names, the struct must be expressed using an\ninstance of <a data-custom-type=\"spanner\/structvalue\">Google\\Cloud\\Spanner\\StructValue<\/a>. Struct value types\nmay be inferred with the same caveats as top-level parameters (in other\nwords, so long as they are not nullable and do not contain nested structs).<\/p>","examples":[{"caption":"","code":"$result = $database->execute('SELECT * FROM Posts WHERE ID = @postId', [\n    'parameters' => [\n        'postId' => 1337\n    ]\n]);\n\n$firstRow = $result->rows()->current();"},{"caption":"<p>Parameters which may be null must include an expected parameter type.<\/p>","code":"use Google\\Cloud\\Spanner\\Database;\nuse Google\\Cloud\\Spanner\\Timestamp;\n\n$values = [\n    new Timestamp(new \\DateTimeImmutable),\n    null\n];\n\n$result = $database->execute('SELECT @timestamp as timestamp', [\n    'parameters' => [\n        'timestamp' => array_rand($values)\n    ],\n    'types' => [\n        'timestamp' => Database::TYPE_TIMESTAMP\n    ]\n]);\n\n$timestamp = $result->rows()->current()['timestamp'];"},{"caption":"<p>Array parameters which may be null or empty must include the array value type.<\/p>","code":"use Google\\Cloud\\Spanner\\ArrayType;\nuse Google\\Cloud\\Spanner\\Database;\n\n$result = $database->execute('SELECT @emptyArrayOfIntegers as numbers', [\n    'parameters' => [\n        'emptyArrayOfIntegers' => []\n    ],\n    'types' => [\n        'emptyArrayOfIntegers' => new ArrayType(Database::TYPE_INT64)\n    ]\n]);\n\n$row = $result->rows()->current();\n$emptyArray = $row['numbers'];"},{"caption":"<p>Struct parameters provide a type definition. Fields within a Struct may be inferred following the same rules as top-level parameters. Any nested structs must be an instance of <code>Google\\Cloud\\Spanner\\StructType<\/code>, and any values which could be of type <code>null<\/code> must explicitly specify their type.<\/p>","code":"use Google\\Cloud\\Spanner\\Database;\nuse Google\\Cloud\\Spanner\\StructType;\n\n$result = $database->execute('SELECT @userStruct.firstName, @userStruct.lastName', [\n    'parameters' => [\n        'userStruct' => [\n            'firstName' => 'John',\n            'lastName' => 'Testuser'\n        ]\n    ],\n    'types' => [\n        'userStruct' => (new StructType())\n            ->add('firstName', Database::TYPE_STRING)\n            ->add('lastName', Database::TYPE_STRING)\n    ]\n]);\n\n$row = $result->rows()->current();\n$fullName = $row['firstName'] . ' ' . $row['lastName']; \/\/ `John Testuser`"},{"caption":"<p>If a struct contains unnamed fields, or multiple fields with the same name, it must be defined using <a data-custom-type=\"spanner\/structvalue\">Google\\Cloud\\Spanner\\StructValue<\/a>.<\/p>","code":"use Google\\Cloud\\Spanner\\Database;\nuse Google\\Cloud\\Spanner\\Result;\nuse Google\\Cloud\\Spanner\\StructValue;\nuse Google\\Cloud\\Spanner\\StructType;\n\n$res = $database->execute('SELECT * FROM UNNEST(ARRAY(SELECT @structParam))', [\n    'parameters' => [\n        'structParam' => (new StructValue)\n            ->add('foo', 'bar')\n            ->add('foo', 2)\n            ->addUnnamed('this field is unnamed')\n    ],\n    'types' => [\n        'structParam' => (new StructType)\n            ->add('foo', Database::TYPE_STRING)\n            ->add('foo', Database::TYPE_INT64)\n            ->addUnnamed(Database::TYPE_STRING)\n    ]\n])->rows(Result::RETURN_NAME_VALUE_PAIR)->current();\n\necho $res[0]['name'] . ': ' . $res[0]['value'] . PHP_EOL; \/\/ \"foo: bar\"\necho $res[1]['name'] . ': ' . $res[1]['value'] . PHP_EOL; \/\/ \"foo: 2\"\necho $res[2]['name'] . ': ' . $res[2]['value'] . PHP_EOL; \/\/ \"2: this field is unnamed\""},{"caption":"<p>Execute a read and return a new Snapshot for further reads.<\/p>","code":"use Google\\Cloud\\Spanner\\Session\\SessionPoolInterface;\n\n$result = $database->execute('SELECT * FROM Posts WHERE ID = @postId', [\n     'parameters' => [\n        'postId' => 1337\n    ],\n    'begin' => true,\n    'transactionType' => SessionPoolInterface::CONTEXT_READ\n]);\n\n$result->rows()->current();\n\n$snapshot = $result->snapshot();"},{"caption":"<p>Execute a read and return a new Transaction for further reads and writes.<\/p>","code":"use Google\\Cloud\\Spanner\\Session\\SessionPoolInterface;\n\n$result = $database->execute('SELECT * FROM Posts WHERE ID = @postId', [\n     'parameters' => [\n        'postId' => 1337\n    ],\n    'begin' => true,\n    'transactionType' => SessionPoolInterface::CONTEXT_READWRITE\n]);\n\n$result->rows()->current();\n\n$transaction = $result->transaction();"}],"resources":[{"title":"ExecuteSqlRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.ExecuteSqlRequest"}],"params":[{"name":"sql","description":"<p>The query string to execute.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options.\nSee <a href=\"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rpc\/google.spanner.v1#google.spanner.v1.TransactionOptions\">TransactionOptions<\/a>\nfor detailed description of available transaction options. Please\nnote that only one of <code>$strong<\/code>, <code>$minReadTimestamp<\/code>,\n<code>$maxStaleness<\/code>, <code>$readTimestamp<\/code> or <code>$exactStaleness<\/code> may be set in\na request.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.parameters","description":"<p>A key\/value array of Query Parameters, where the key is represented in the query string prefixed by a <code>@<\/code> symbol.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.types","description":"<p>A key\/value array of Query Parameter types. Generally, Google Cloud PHP can infer types. Explicit type declarations are required in the case of struct parameters, or when a null value exists as a parameter. Accepted values for primitive types are defined as constants on <a data-custom-type=\"spanner\/database\">Google\\Cloud\\Spanner\\Database<\/a>, and are as follows: <code>Database::TYPE_BOOL<\/code>, <code>Database::TYPE_INT64<\/code>, <code>Database::TYPE_FLOAT64<\/code>, <code>Database::TYPE_TIMESTAMP<\/code>, <code>Database::TYPE_DATE<\/code>, <code>Database::TYPE_STRING<\/code>, <code>Database::TYPE_BYTES<\/code>. If the value is an array, use <a data-custom-type=\"spanner\/arraytype\">Google\\Cloud\\Spanner\\ArrayType<\/a> to declare the array parameter types. Likewise, for structs, use <a data-custom-type=\"spanner\/structtype\">Google\\Cloud\\Spanner\\StructType<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.returnReadTimestamp","description":"<p>If true, the Cloud Spanner-selected read timestamp is included in the Transaction message that describes the transaction.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.strong","description":"<p>Read at a timestamp where all previously committed transactions are visible.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.minReadTimestamp","description":"<p>Execute reads at a timestamp &gt;= the given timestamp. Only available in single-use transactions.<\/p>","types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"optional":null,"nullable":null},{"name":"options.maxStaleness","description":"<p>Read data at a timestamp &gt;= NOW - the given timestamp. Only available in single-use transactions.<\/p>","types":["<a data-custom-type=\"spanner\/duration\">Google\\Cloud\\Spanner\\Duration<\/a>"],"optional":null,"nullable":null},{"name":"options.readTimestamp","description":"<p>Executes all reads at the given timestamp.<\/p>","types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"optional":null,"nullable":null},{"name":"options.exactStaleness","description":"<p>Represents a number of seconds. Executes all reads at a timestamp that is $exactStaleness old.<\/p>","types":["<a data-custom-type=\"spanner\/duration\">Google\\Cloud\\Spanner\\Duration<\/a>"],"optional":null,"nullable":null},{"name":"options.begin","description":"<p>If true, will begin a new transaction. If a read\/write transaction is desired, set the value of $transactionType. If a transaction or snapshot is created, it will be returned as <code>$result-&gt;transaction()<\/code> or <code>$result-&gt;snapshot()<\/code>. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.transactionType","description":"<p>One of <code>SessionPoolInterface::CONTEXT_READ<\/code> or <code>SessionPoolInterface::CONTEXT_READWRITE<\/code>. If read\/write is chosen, any snapshot options will be disregarded. If <code>$begin<\/code> is false, transaction type MUST be <code>SessionPoolInterface::CONTEXT_READ<\/code>. <strong>Defaults to<\/strong> <code>SessionPoolInterface::CONTEXT_READ<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.sessionOptions","description":"<p>Session configuration and request options. Session labels may be applied using the <code>labels<\/code> key.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.queryOptions","description":"<p>Query optimizer configuration.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.queryOptions.optimizerVersion","description":"<p>An option to control the selection of optimizer version. This parameter allows individual queries to pick different query optimizer versions. Specifying &quot;latest&quot; as a value instructs Cloud Spanner to use the latest supported query optimizer version. If not specified, Cloud Spanner uses optimizer version set at the client level options or set by the <code>SPANNER_OPTIMIZER_VERSION<\/code> environment variable. Any other positive integer (from the list of supported optimizer versions) overrides the default optimizer version for query execution. Executing a SQL statement with an invalid optimizer version will fail with a syntax error (<code>INVALID_ARGUMENT<\/code>) status.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.requestOptions","description":"<p>Request options. For more information on available options, please see <a href=\"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rest\/v1\/RequestOptions\">the upstream documentation<\/a>. Please note, if using the <code>priority<\/code> setting you may utilize the constants available on <a data-custom-type=\"spanner\/v1\/requestoptions\/priority\">Google\\Cloud\\Spanner\\V1\\RequestOptions\\Priority<\/a> to set a value. Please note, the <code>transactionTag<\/code> setting will be ignored as it is not supported for read-only transactions.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"spanner\/result\">Google\\Cloud\\Spanner\\Result<\/a>"],"description":""}]},{"id":"executePartitionedUpdate","type":"instance","name":"executePartitionedUpdate","source":"Spanner\/src\/Database.php#L1718","description":"<p>Execute a partitioned DML update.<\/p>\n<p>Returns the lower bound of rows modified by the DML statement.<\/p>\n<p><strong>PLEASE NOTE<\/strong> Most use cases for DML are better served by using\n<a data-custom-type=\"spanner\/transaction\" data-method=\"executeUpdate\">Google\\Cloud\\Spanner\\Transaction::executeUpdate()<\/a>. Please read and\nunderstand the documentation for partitioned DML before implementing it\nin your application.<\/p>\n<p>Data Manipulation Language (DML) allows you to execute statements which\nmodify the state of the database (i.e. inserting, updating or deleting\nrows).<\/p>\n<p>To execute a SELECT statement, use\n<a data-custom-type=\"spanner\/database\" data-method=\"execute\">Google\\Cloud\\Spanner\\Database::execute()<\/a>.<\/p>\n<p>The method will block until the update is complete. Running a DML\nstatement with this method does not offer exactly once semantics, and\ntherefore the DML statement should be idempotent. The DML statement must\nbe fully-partitionable. Specifically, the statement must be expressible\nas the union of many statements which each access only a single row of\nthe table. Partitioned DML partitions the key space and runs the DML\nstatement over each partition in parallel using separate, internal\ntransactions that commit independently.<\/p>\n<p>Partitioned DML is good fit for large, database-wide, operations that are\nidempotent. Partitioned DML enables large-scale changes without running\ninto transaction size limits or accidentally locking the entire table in\none large transaction. Smaller scoped statements, such as an OLTP\nworkload, should prefer using\n<a data-custom-type=\"spanner\/transaction\" data-method=\"executeUpdate\">Google\\Cloud\\Spanner\\Transaction::executeUpdate()<\/a>.<\/p>\n<ul>\n<li>The DML statement must be fully-partitionable. Specifically, the\nstatement must be expressible as the union of many statements which\neach access only a single row of the table.<\/li>\n<li>The statement is not applied atomically to all rows of the table.\nRather, the statement is applied atomically to partitions of the table,\nin independent internal transactions. Secondary index rows are updated\natomically with the base table rows.<\/li>\n<li>Partitioned DML does not guarantee exactly-once execution semantics\nagainst a partition. The statement will be applied at least once to\neach partition. It is strongly recommended that the DML statement\nshould be idempotent to avoid unexpected results. For instance, it is\npotentially dangerous to run a statement such as\n<code>UPDATE table SET column = column + 1<\/code> as it could be run multiple\ntimes against some rows.<\/li>\n<li>The partitions are committed automatically - there is no support for\nCommit or Rollback. If the call returns an error, or if the client\nissuing the DML statement dies, it is possible that some rows had the\nstatement executed on them successfully. It is also possible that the\nstatement was never executed against other rows.<\/li>\n<li>If any error is encountered during the execution of the partitioned\nDML operation (for instance, a UNIQUE INDEX violation, division by\nzero, or a value that cannot be stored due to schema constraints), then\nthe operation is stopped at that point and an error is returned. It is\npossible that at this point, some partitions have been committed (or\neven committed multiple times), and other partitions have not been run\nat all.<\/li>\n<\/ul>\n<p>Given the above, Partitioned DML is good fit for large, database-wide,\noperations that are idempotent, such as deleting old rows from a very\nlarge table.<\/p>\n<p>Please refer to the TransactionOptions documentation referenced below in\norder to fully understand the semantics and intended use case for\npartitioned DML updates.<\/p>","examples":[{"caption":"","code":"use Google\\Cloud\\Spanner\\Date;\n\n$deactivatedUserCount = $database->executePartitionedUpdate(\n    'UPDATE Users u SET u.activeSubscription = false, u.subscriptionEndDate = @date ' .\n    'WHERE TIMESTAMP_DIFF(CURRENT_TIMESTAMP(), u.lastBillDate, DAY) > 365',\n    [\n        'parameters' => [\n            'date' => new Date(new \\DateTime)\n        ]\n    ]\n);"}],"resources":[{"title":"TransactionOptions","link":"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rpc\/google.spanner.v1#google.spanner.v1.TransactionOptions"},{"title":"ExecuteSqlRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.ExecuteSqlRequest"}],"params":[{"name":"statement","description":"<p>The DML statement to execute.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.parameters","description":"<p>A key\/value array of Query Parameters, where the key is represented in the statement prefixed by a <code>@<\/code> symbol.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.types","description":"<p>A key\/value array of Query Parameter types. Generally, Google Cloud PHP can infer types. Explicit type declarations are required in the case of struct parameters, or when a null value exists as a parameter. Accepted values for primitive types are defined as constants on <a data-custom-type=\"spanner\/database\">Google\\Cloud\\Spanner\\Database<\/a>, and are as follows: <code>Database::TYPE_BOOL<\/code>, <code>Database::TYPE_INT64<\/code>, <code>Database::TYPE_FLOAT64<\/code>, <code>Database::TYPE_TIMESTAMP<\/code>, <code>Database::TYPE_DATE<\/code>, <code>Database::TYPE_STRING<\/code>, <code>Database::TYPE_BYTES<\/code>. If the value is an array, use <a data-custom-type=\"spanner\/arraytype\">Google\\Cloud\\Spanner\\ArrayType<\/a> to declare the array parameter types. Likewise, for structs, use <a data-custom-type=\"spanner\/structtype\">Google\\Cloud\\Spanner\\StructType<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.requestOptions","description":"<p>Request options. For more information on available options, please see <a href=\"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rest\/v1\/RequestOptions\">the upstream documentation<\/a>. Please note, if using the <code>priority<\/code> setting you may utilize the constants available on <a data-custom-type=\"spanner\/v1\/requestoptions\/priority\">Google\\Cloud\\Spanner\\V1\\RequestOptions\\Priority<\/a> to set a value. Please note, the <code>transactionTag<\/code> setting will be ignored as it is not supported for partitioned DML.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"description":"<p>The number of rows modified.<\/p>"}]},{"id":"read","type":"instance","name":"read","source":"Spanner\/src\/Database.php#L1851","description":"<p>Lookup rows in a table.<\/p>","examples":[{"caption":"","code":"use Google\\Cloud\\Spanner\\KeySet;\n\n$keySet = new KeySet([\n    'keys' => [1337]\n]);\n\n$columns = ['ID', 'title', 'content'];\n\n$result = $database->read('Posts', $keySet, $columns);\n\n$firstRow = $result->rows()->current();"},{"caption":"<p>Execute a read and return a new Snapshot for further reads.<\/p>","code":"use Google\\Cloud\\Spanner\\KeySet;\nuse Google\\Cloud\\Spanner\\Session\\SessionPoolInterface;\n\n$keySet = new KeySet([\n    'keys' => [1337]\n]);\n\n$columns = ['ID', 'title', 'content'];\n\n$result = $database->read('Posts', $keySet, $columns, [\n    'begin' => true,\n    'transactionType' => SessionPoolInterface::CONTEXT_READ\n]);\n\n$result->rows()->current();\n\n$snapshot = $result->snapshot();"},{"caption":"<p>Execute a read and return a new Transaction for further reads and writes.<\/p>","code":"use Google\\Cloud\\Spanner\\KeySet;\nuse Google\\Cloud\\Spanner\\Session\\SessionPoolInterface;\n\n$keySet = new KeySet([\n    'keys' => [1337]\n]);\n\n$columns = ['ID', 'title', 'content'];\n\n$result = $database->read('Posts', $keySet, $columns, [\n    'begin' => true,\n    'transactionType' => SessionPoolInterface::CONTEXT_READWRITE\n]);\n\n$result->rows()->current();\n\n$transaction = $result->transaction();"}],"resources":[{"title":"ReadRequest","link":"https:\/\/cloud.google.com\/spanner\/reference\/rpc\/google.spanner.v1#google.spanner.v1.ReadRequest"}],"params":[{"name":"table","description":"<p>The table name.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"keySet","description":"<p>The KeySet to select rows.<\/p>","types":["<a data-custom-type=\"spanner\/keyset\">Google\\Cloud\\Spanner\\KeySet<\/a>"],"optional":false,"nullable":null},{"name":"columns","description":"<p>A list of column names to return.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options.<\/p>\n<pre><code>See [TransactionOptions](https:\/\/cloud.google.com\/spanner\/docs\/reference\/rpc\/google.spanner.v1#google.spanner.v1.TransactionOptions)\nfor detailed description of available transaction options.\n\nPlease note that only one of `$strong`, `$minReadTimestamp`,\n`$maxStaleness`, `$readTimestamp` or `$exactStaleness` may be set in\na request.<\/code><\/pre>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.index","description":"<p>The name of an index on the table.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.limit","description":"<p>The number of results to return.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.returnReadTimestamp","description":"<p>If true, the Cloud Spanner-selected read timestamp is included in the Transaction message that describes the transaction.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.strong","description":"<p>Read at a timestamp where all previously committed transactions are visible.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.minReadTimestamp","description":"<p>Execute reads at a timestamp &gt;= the given timestamp. Only available in single-use transactions.<\/p>","types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"optional":null,"nullable":null},{"name":"options.maxStaleness","description":"<p>Read data at a timestamp &gt;= NOW - the given timestamp. Only available in single-use transactions.<\/p>","types":["<a data-custom-type=\"spanner\/duration\">Google\\Cloud\\Spanner\\Duration<\/a>"],"optional":null,"nullable":null},{"name":"options.readTimestamp","description":"<p>Executes all reads at the given timestamp.<\/p>","types":["<a data-custom-type=\"spanner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"optional":null,"nullable":null},{"name":"options.exactStaleness","description":"<p>Represents a number of seconds. Executes all reads at a timestamp that is $exactStaleness old.<\/p>","types":["<a data-custom-type=\"spanner\/duration\">Google\\Cloud\\Spanner\\Duration<\/a>"],"optional":null,"nullable":null},{"name":"options.begin","description":"<p>If true, will begin a new transaction. If a read\/write transaction is desired, set the value of $transactionType. If a transaction or snapshot is created, it will be returned as <code>$result-&gt;transaction()<\/code> or <code>$result-&gt;snapshot()<\/code>. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.transactionType","description":"<p>One of <code>SessionPoolInterface::CONTEXT_READ<\/code> or <code>SessionPoolInterface::CONTEXT_READWRITE<\/code>. If read\/write is chosen, any snapshot options will be disregarded. If <code>$begin<\/code> is false, transaction type MUST be <code>SessionPoolInterface::CONTEXT_READ<\/code>. <strong>Defaults to<\/strong> <code>SessionPoolInterface::CONTEXT_READ<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.sessionOptions","description":"<p>Session configuration and request options. Session labels may be applied using the <code>labels<\/code> key.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.requestOptions","description":"<p>Request options. For more information on available options, please see <a href=\"https:\/\/cloud.google.com\/spanner\/docs\/reference\/rest\/v1\/RequestOptions\">the upstream documentation<\/a>. Please note, if using the <code>priority<\/code> setting you may utilize the constants available on <a data-custom-type=\"spanner\/v1\/requestoptions\/priority\">Google\\Cloud\\Spanner\\V1\\RequestOptions\\Priority<\/a> to set a value. Please note, the <code>transactionTag<\/code> setting will be ignored as it is not supported for read-only transactions.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"spanner\/result\">Google\\Cloud\\Spanner\\Result<\/a>"],"description":""}]},{"id":"sessionPool","type":"instance","name":"sessionPool","source":"Spanner\/src\/Database.php#L1880","description":"<p>Get the underlying session pool implementation.<\/p>","examples":[{"caption":"","code":"$pool = $database->sessionPool();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"spanner\/session\/sessionpoolinterface\">Google\\Cloud\\Spanner\\Session\\SessionPoolInterface<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.null.php\" target=\"_blank\">null<\/a>"],"description":""}]},{"id":"close","type":"instance","name":"close","source":"Spanner\/src\/Database.php#L1898","description":"<p>Closes the database connection by returning the active session back to\nthe session pool queue or by deleting the session if there is no pool\nassociated.<\/p>\n<p>It is highly important to ensure this is called as it is not always safe\nto rely soley on <a data-custom-type=\"spanner\/database\" data-method=\"__destruct\">Google\\Cloud\\Spanner\\Database::__destruct()<\/a>.<\/p>","examples":[{"caption":"","code":"$database->close();"}],"resources":[],"params":[],"exceptions":[],"returns":[]},{"id":"__destruct","type":"instance","name":"__destruct","source":"Spanner\/src\/Database.php#L1914","description":"<p>Closes the database connection.<\/p>","examples":[],"resources":[],"params":[],"exceptions":[],"returns":[]},{"id":"resumeOperation","type":"instance","name":"resumeOperation","source":"Core\/src\/LongRunning\/LROTrait.php#L74","description":"<p>Resume a Long Running Operation<\/p>\n\nImplemented in <a data-custom-type=\"core\/longrunning\/lrotrait\">Google\\Cloud\\Core\\LongRunning\\LROTrait<\/a>","examples":[],"resources":[],"params":[{"name":"operationName","description":"<p>The Long Running Operation name.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"info","description":"<p>The operation data.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"core\/longrunning\/longrunningoperation\">Google\\Cloud\\Core\\LongRunning\\LongRunningOperation<\/a>"],"description":""}]},{"id":"longRunningOperations","type":"instance","name":"longRunningOperations","source":"Core\/src\/LongRunning\/LROTrait.php#L101","description":"<p>List long running operations.<\/p>\n\nImplemented in <a data-custom-type=\"core\/longrunning\/lrotrait\">Google\\Cloud\\Core\\LongRunning\\LROTrait<\/a>","examples":[],"resources":[],"params":[{"name":"options","description":"<p>Configuration Options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.name","description":"<p>The name of the operation collection.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.filter","description":"<p>The standard list filter.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.pageSize","description":"<p>Maximum number of results to return per request.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.resultLimit","description":"<p>Limit the number of results returned in total. <strong>Defaults to<\/strong> <code>0<\/code> (return all results).<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.pageToken","description":"<p>A previously-returned page token used to resume the loading of results from a specific point.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"core\/iterator\/itemiterator\">Google\\Cloud\\Core\\Iterator\\ItemIterator<\/a>&lt;<a data-custom-type=\"core\/longrunning\/longrunningoperation\">Google\\Cloud\\Core\\LongRunning\\LongRunningOperation<\/a>&gt;"],"description":""}]},{"id":"resumeOperation","type":"instance","name":"resumeOperation","source":"Spanner\/src\/Database.php","description":"<p>Resume a Long Running Operation<\/p>","examples":[{"caption":"","code":"$operation = $database->resumeOperation($operationName);"}],"resources":[],"params":[{"name":"operationName","description":"<p>The Long Running Operation name.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"info","description":"<p>The operation data.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["\\LongRunningOperation"],"description":""}]},{"id":"longRunningOperations","type":"instance","name":"longRunningOperations","source":"Spanner\/src\/Database.php","description":"<p>List long running operations.<\/p>","examples":[{"caption":"","code":"$operations = $database->longRunningOperations();"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/class.iterator.php\" target=\"_blank\">ItemIterator<\/a>&lt;\\InstanceConfiguration&gt;"],"description":""}]}]}